apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'com.github.johnrengelman.shadow'
apply plugin: 'idea'
apply from: 'config.gradle'

buildscript {
    // 设置在构建项目时的软件源库
    repositories {
        mavenLocal()
        maven { url 'http://maven.aliyun.com/nexus/content/groups/public/' }
        mavenCentral()
    }

    // 设置引用在构建项目时的插件
    dependencies {
        classpath "com.github.jengelman.gradle.plugins:shadow:2.0.1"
    }
}

// Jar包基础名称
def jarBaseName = ext.project.projectName
// Jar包版本号
def jarVersion = ext.project.projectVersion

sourceCompatibility = 1.8
targetCompatibility = 1.8

// 设置编译时的编码
tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

// 设置编译时的编码
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

// 设置项目的资源目录位置
sourceSets.main.resources.srcDirs = ["src/main/java", "src/main/resources"]

mainClassName = 'com.stevejrong.music.factory.boot.MusicFactoryApplication'

// 设置Jar包属性
jar {
    // 生成Jar包的基础名
    baseName = jarBaseName
    // 生成Jar包的版本号
    version jarVersion

    // 生成Jar包的manifest清单属性
    manifest {
        attributes 'Manifest-Version': 1.1,
                'Main-Class': 'com.stevejrong.music.factory.boot.MusicFactoryApplication'
    }
}

// 设置项目的软件源库
repositories {
    mavenLocal()
    maven { url 'http://maven.aliyun.com/nexus/content/groups/public/' }
    mavenCentral()
}

dependencies {
    compile("org.springframework:spring-context:$rootProject.ext.dependencies.springContextVersion")
    compile("org.springframework:spring-test:$rootProject.ext.dependencies.springTestVersion")
    compile("org.aspectj:aspectjweaver:$rootProject.ext.dependencies.aspectjweaverVersion")

    compile("net.jthink:jaudiotagger:$rootProject.ext.dependencies.jAudioTaggerVersion")
    compile("net.bramp.ffmpeg:ffmpeg:$rootProject.ext.dependencies.ffmpegVersion")

    compile("com.google.code.gson:gson:$rootProject.ext.dependencies.gsonVersion")
    compile("org.yaml:snakeyaml:$rootProject.ext.dependencies.snakeyamlVersion")
    compile("com.squareup.okhttp3:okhttp:$rootProject.ext.dependencies.okHttpVersion")
    compile("com.google.guava:guava:$rootProject.ext.dependencies.guavaVersion")
    compile("org.apache.commons:commons-lang3:$rootProject.ext.dependencies.commonsLang3Version")
    compile("org.apache.commons:commons-collections4:$rootProject.ext.dependencies.commonsCollections4Version")
    compile("net.sf.dozer:dozer:$rootProject.ext.dependencies.dozerVersion")

    testCompile("junit:junit:$rootProject.ext.dependencies.junitVersion")
    testCompile("org.hamcrest:hamcrest-core:$rootProject.ext.dependencies.hamcrestCoreVersion")
}